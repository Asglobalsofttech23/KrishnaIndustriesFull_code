import{r as l,c as x,d as u,j as e,G as n,R as j,U as o,g as A,B as Z,F as ee,V as te,z as ae,E as se,H as le,J as ne,K as k,N as a,Q as re,S as oe}from"./index-CxJtQRLb.js";import{h as g}from"./moment-G82_0lEo.js";import{S as de}from"./Search-BCnfRBZA.js";import{T as ie,a as L}from"./Tabs-CaTPvbk4.js";import{P as ce}from"./Pagination-CQtFweVv.js";const ge=()=>{const[_,p]=l.useState([]),[f,c]=l.useState([]),[h,w]=l.useState(5),[D,y]=l.useState(1),[I,R]=l.useState([]),[U,$]=l.useState([]),[B,V]=l.useState([]),[m,W]=l.useState(g().format("YYYY-MM-DD")),[Y,z]=l.useState(),[E,G]=l.useState(),[b,T]=l.useState(""),[S,M]=l.useState(""),[C,N]=l.useState(""),[d,H]=l.useState(1);l.useEffect(()=>{x.get(`${u.apiUrl}/leads/empFollowLeadsForAdmin`).then(t=>{const s=Array.from(new Set(t.data.map(r=>r.emp_id))).map(r=>t.data.find(v=>v.emp_id===r));R(s);const P=new Set(t.data.map(r=>r.leads_state));$([...P]);const F=new Set(t.data.map(r=>r.leads_city));V([...F])}).catch(t=>{console.log("Leads data is not fetched.",t)})},[]),l.useEffect(()=>{d==1?x.get(`${u.apiUrl}/leads/empFollowLeadsForAdmin
        `).then(t=>{console.log("Follow Leads Data :",t),p(t.data),c(t.data)}).catch(t=>{console.log("Following Leads Data is not fetched.")}):d==2&&x.get(`${u.apiUrl}/leads/empFollowLeadsForAdmin?reminderDate=${m}
        `).then(t=>{console.log("Follow Leads Data :",t),p(t.data),c(t.data)}).catch(t=>{console.log("Following Leads Data is not fetched.")})},[d]);const O=()=>{const t=b!==""?b:"null",s=S!==""?S:"null",P=C!==""?C:"null",F=m!==""?m:"null",r=Y!==""?g(Y).format("YYYY-MM-DD 00:00:00"):"null",v=E!==""?g(E).format("YYYY-MM-DD 23:59:50"):"null";x.get(`${u.apiUrl}/leads/empFollowLeadsForAdmin`,{params:{state:t,city:s,emp_id:P,reminderDate:F,startDate:r,endDate:v}}).then(i=>{console.log("Follow Leads Data:",i),p(i.data),c(i.data),console.log("Data:",i.data)}).catch(i=>{console.log("Following Leads Data is not fetched.")})},Q=()=>{z(""),G(""),T(""),M(""),N(""),W("")},q=t=>{const s=parseInt(t.target.value,10);s==1?(w(_.length),y(1)):(w(s),y(1))},J=(D-1)*h,K=D*h,X=f?f.slice(J,K):[];return e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("h1",{className:"text-center",children:"Followed Leads Index"}),e.jsxs(n,{container:!0,spacing:3,children:[d==3?e.jsxs(e.Fragment,{children:[e.jsx(n,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,select:!0,label:"Employee Name",name:"emp_name",onChange:t=>N(t.target.value),value:C,children:I.map((t,s)=>e.jsx(o,{value:t.emp_id,children:t.emp_name},s))})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,label:"Reminder Date",name:"reminderDate",type:"date",onChange:t=>W(t.target.value),value:m,InputLabelProps:{shrink:!0}})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,select:!0,label:"Select State",name:"state",onChange:t=>T(t.target.value),value:b,children:U.map((t,s)=>e.jsx(o,{value:t,children:t},s))})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,select:!0,label:"Select City",name:"city",onChange:t=>M(t.target.value),value:S,children:B.map((t,s)=>e.jsx(o,{value:t,children:t},s))})}),e.jsxs(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(A,{onClick:O,children:"Filter"}),e.jsx(A,{onClick:Q,children:"Clear"})]})]}):e.jsx(e.Fragment,{}),e.jsx(n,{item:!0,xs:4,children:e.jsx(de,{data:_,setData:c})}),e.jsx(n,{item:!0,xs:4,display:"flex",justifyContent:"end",children:e.jsx(Z,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(ie,{value:d,onChange:(t,s)=>H(s),centered:!0,children:[e.jsx(L,{label:"All",value:1}),e.jsx(L,{label:"Today Remember Leads",value:2}),e.jsx(L,{label:"Apply filter",value:3})]})})}),e.jsx(n,{item:!0,xs:4,display:"flex",justifyContent:"end",children:e.jsx(ee,{children:e.jsxs(te,{value:h,onChange:q,children:[e.jsx(o,{value:5,children:"5 Per Page"}),e.jsx(o,{value:10,children:"10 Per Page"}),e.jsx(o,{value:15,children:"15 Per Page"}),e.jsx(o,{value:1,children:"All Per Page"})]})})})]}),e.jsx(ae,{component:se,style:{marginTop:"20px"},children:e.jsxs(le,{children:[e.jsx(ne,{children:e.jsxs(k,{style:{fontWeight:"bold",backgroundColor:"#FFF9C4"},children:[e.jsx(a,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Employee Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Mobile"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Email"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Company"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(a,{style:{fontWeight:"bold"},children:"State"}),e.jsx(a,{style:{fontWeight:"bold"},children:"City"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Query"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Remember"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Reminder Date"})]})}),e.jsx(re,{children:X.map((t,s)=>e.jsxs(k,{children:[e.jsx(a,{children:s+1}),e.jsx(a,{children:t.emp_name}),e.jsx(a,{children:t.leads_name}),e.jsx(a,{children:t.leads_mobile}),e.jsx(a,{children:t.leads_email}),e.jsx(a,{children:t.leads_company}),e.jsx(a,{children:t.leads_address}),e.jsx(a,{children:t.leads_state}),e.jsx(a,{children:t.leads_city}),e.jsx(a,{children:t.product_name}),e.jsx(a,{children:t.Call_Discussion}),e.jsx(a,{children:t.remember}),e.jsx(a,{children:g(t.reminder_date).format("YYYY-MM-DD")})]},s))})]})}),e.jsx(n,{container:!0,spacing:2,display:"flex",justifyContent:"center",className:"mt-4",children:e.jsx(oe,{spacing:2,children:e.jsx(ce,{count:Math.ceil(f.length/h),page:D,onChange:(t,s)=>y(s),size:"small",style:{cursor:"pointer","&:hover":{backgroundColor:"transparent"}}})})})]})};export{ge as default};
