import{r as u,j as e,G as a,R as d,U as p,g as j,c as y,d as v,B as he,F as xe,V as je,z as pe,E as fe,H as _e,J as ge,K as z,N as c,Q as be,S as Ce}from"./index-CxJtQRLb.js";import{S as De}from"./Search-BCnfRBZA.js";import{h as Y}from"./moment-G82_0lEo.js";import{C as ye}from"./ConvertCustomer-B3busiYY.js";import{T as ve,a as M}from"./Tabs-CaTPvbk4.js";import{P as Le}from"./Pagination-CQtFweVv.js";import{D as R,a as N,b as $}from"./DialogContent-DOuEahYY.js";const Se=({onClose:f,data:t})=>{const[l,b]=u.useState({leads_name:t?t.leads_name:"",leads_mobile:t?t.leads_mobile:"",leads_email:t?t.leads_email:"",leads_company:t?t.leads_company:"",leads_address:t?t.leads_address:"",leads_state:t?t.leads_state:"",leads_city:t?t.leads_city:"",product_name:t?t.product_name:"",Call_Discussion:t?t.Call_Discussion:"",remember:t?t.remember:"",reminder_date:t?t.reminder_date:""}),[m,C]=u.useState({Call_Discussion:"",remember:"",reminder_date:""}),_=(x,i)=>{let n="";const h=i&&typeof i=="string"?i.trim():i;switch(x){case"Call_Discussion":h||(n="Leads Query Message is Required");break;case"remember":h?h==="yes"&&!l.reminder_date&&(n="Reminder Date is Required"):n="Please Select one";break}return n},r=x=>{const{name:i,value:n}=x.target,h=_(i,n);b({...l,[i]:n}),C({...m,[i]:h})},L=x=>{x.preventDefault();let i={};Object.keys(l).forEach(n=>{const h=l[n],D=_(n,h);D&&(i[n]=D)}),Object.keys(i).length>0&&C(i),y.put(`${v.apiUrl}/leads/updateFlwLeadForEmp/${t.follow_id}`,l).then(n=>{console.log("Data Added Successfully.",n),f()}).catch(n=>{console.log("Data is not added",n)})};return e.jsx("div",{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_name",label:"Lead Name",value:l.leads_name,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_mobile",label:"Lead Mobile",value:l.leads_mobile,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_email",label:"Lead Email",value:l.leads_email,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_company",label:"Lead Company",value:l.leads_company,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_address",label:"Lead Address",value:l.leads_address,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_state",label:"Lead State",value:l.leads_state,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_city",label:"Lead City",value:l.leads_city,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"product_name",label:"Product Name",value:l.product_name,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"Call_Discussion",label:"Leads Query",value:l.Call_Discussion,onChange:r,error:!!m.Call_Discussion,helperText:m.Call_Discussion})}),e.jsx(a,{item:!0,xs:6,children:e.jsxs(d,{fullWidth:!0,select:!0,name:"remember",label:"Remember",value:l.remember,onChange:r,error:!!m.remember,helperText:m.remember,children:[e.jsx(p,{value:"Yes",children:"Yes"}),e.jsx(p,{value:"No",children:"No"})]})}),l.remember==="Yes"&&e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"reminder_date",label:"Reminder Date",type:"date",value:l.reminder_date,onChange:r,error:!!m.reminder_date,helperText:m.reminder_date,InputLabelProps:{shrink:!0}})}),e.jsx(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(j,{onClick:L,children:"Update"})})]})})},We=({onClose:f,data:t})=>{const[l,b]=u.useState({leads_name:t?t.leads_name:"",leads_mobile:t?t.leads_mobile:"",leads_email:t?t.leads_email:"",leads_company:t?t.leads_company:"",leads_address:t?t.leads_address:"",leads_state:t?t.leads_state:"",leads_city:t?t.leads_city:"",product_name:t?t.product_name:"",Call_Discussion:t?t.Call_Discussion:"",remember:t?t.remember:"",reminder_date:t?t.reminder_date:""}),[m,C]=u.useState({Call_Discussion:"",remember:"",reminder_date:""}),_=(x,i)=>{let n="";const h=i&&typeof i=="string"?i.trim():i;switch(x){case"Call_Discussion":h||(n="Leads Query Message is Required");break;case"remember":h?h==="yes"&&!l.reminder_date&&(n="Reminder Date is Required"):n="Please Select one";break}return n},r=x=>{const{name:i,value:n}=x.target,h=_(i,n);b({...l,[i]:n}),C({...m,[i]:h})},L=x=>{x.preventDefault();let i={};Object.keys(l).forEach(n=>{const h=l[n],D=_(n,h);D&&(i[n]=D)}),Object.keys(i).length>0&&C(i),y.put(`${v.apiUrl}/leads/updateFlwLeadForEmp/${t.follow_id}`,l).then(n=>{console.log("Data Added Successfully.",n),f()}).catch(n=>{console.log("Data is not added",n)})};return e.jsx("div",{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_name",label:"Lead Name",value:l.leads_name,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_mobile",label:"Lead Mobile",value:l.leads_mobile,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_email",label:"Lead Email",value:l.leads_email,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_company",label:"Lead Company",value:l.leads_company,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_address",label:"Lead Address",value:l.leads_address,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_state",label:"Lead State",value:l.leads_state,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"leads_city",label:"Lead City",value:l.leads_city,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"product_name",label:"Product Name",value:l.product_name,onChange:r})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"Call_Discussion",label:"Leads Query",value:l.Call_Discussion,onChange:r,error:!!m.Call_Discussion,helperText:m.Call_Discussion})}),e.jsx(a,{item:!0,xs:6,children:e.jsxs(d,{fullWidth:!0,select:!0,name:"remember",label:"Remember",value:l.remember,onChange:r,error:!!m.remember,helperText:m.remember,children:[e.jsx(p,{value:"Yes",children:"Yes"}),e.jsx(p,{value:"No",children:"No"})]})}),l.remember==="Yes"&&e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,name:"reminder_date",label:"Reminder Date",type:"date",value:l.reminder_date,onChange:r,error:!!m.reminder_date,helperText:m.reminder_date,InputLabelProps:{shrink:!0}})}),e.jsx(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(j,{onClick:L,children:"Submit"})})]})})},Te=()=>{const[f,t]=u.useState([]),[l,b]=u.useState([]),[m,C]=u.useState(5),[_,r]=u.useState(1),[L,x]=u.useState([]),[i,n]=u.useState([]),[h,D]=u.useState(Y().format("YYYY-MM-DD")),[A,O]=u.useState(""),[B,V]=u.useState(""),[U,Q]=u.useState(""),[T,q]=u.useState(""),w=sessionStorage.getItem("emp_id"),[S,G]=u.useState(1),[I,P]=u.useState(!1),[H,J]=u.useState([]),[K,F]=u.useState(!1),[X,Z]=u.useState([]),[ee,k]=u.useState(!1),[se,te]=u.useState([]);u.useEffect(()=>{y.get(`${v.apiUrl}/leads/followingLeadsByEmpId?emp_id=${w}`).then(s=>{const o=new Set(s.data.map(W=>W.leads_state));x([...o]);const g=new Set(s.data.map(W=>W.leads_city));n([...g])}).catch(s=>{console.log("Leads data is not fetched.",s)})},[I]),u.useEffect(()=>{S==1?y.get(`${v.apiUrl}/leads/followingLeadsByEmpId?emp_id=${w}
      `).then(s=>{console.log("Follow Leads Data :",s),t(s.data),b(s.data)}).catch(s=>{console.log("Following Leads Data is not fetched.")}):S==2&&y.get(`${v.apiUrl}/leads/followingLeadsByEmpId?emp_id=${w}&reminderDate=${h}
      `).then(s=>{console.log("Follow Leads Data :",s),t(s.data),b(s.data)}).catch(s=>{console.log("Following Leads Data is not fetched.")})},[S,I]);const le=s=>{const o=parseInt(s.target.value,10);o==1?(C(f.length),r(1)):(C(o),r(1))},ae=(_-1)*m,ne=_*m,re=l?l.slice(ae,ne):[],ie=()=>{const s=U!==""?U:"null",o=T!==""?T:"null",g=h!==""?h:"null",W=A!==""?Y(A).format("YYYY-MM-DD 00:00:00"):"null",me=B!==""?Y(B).format("YYYY-MM-DD 23:59:50"):"null";y.get(`${v.apiUrl}/leads/followingLeadsByEmpId`,{params:{emp_id:w,state:s,city:o,reminderDate:g,startDate:W,endDate:me}}).then(E=>{console.log("Follow Leads Data :",E),t(E.data),b(E.data)}).catch(E=>{console.log("Following Leads Data is not fetched.")})},de=()=>{O(""),V(""),Q(""),q(""),D("")},oe=s=>{const o=f.find(g=>g.follow_id===s);o&&(J(o),P(!0))},ce=s=>{const o=f.find(g=>g.follow_id===s);o&&(Z(o),F(!0))},ue=s=>{const o=f.find(g=>g.follow_id===s);o&&(te(o),k(!0))};return e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("h1",{className:"text-center",children:"Followed Leads Index"}),e.jsxs(a,{container:!0,spacing:3,children:[S==3?e.jsxs(e.Fragment,{children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"Start Date",type:"date",InputLabelProps:{shrink:!0},onChange:s=>O(s.target.value)})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"End Date",type:"date",InputLabelProps:{shrink:!0},onChange:s=>V(s.target.value)})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"Reminder Date",name:"reminderDate",type:"date",onChange:s=>D(s.target.value),value:h,InputLabelProps:{shrink:!0}})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select State",name:"state",onChange:s=>Q(s.target.value),value:U,children:L.map((s,o)=>e.jsx(p,{value:s,children:s},o))})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select City",name:"city",onChange:s=>q(s.target.value),value:T,children:i.map((s,o)=>e.jsx(p,{value:s,children:s},o))})}),e.jsxs(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(j,{onClick:ie,children:"Filter"}),e.jsx(j,{onClick:de,children:"Clear"})]})]}):e.jsx(e.Fragment,{}),e.jsx(a,{item:!0,xs:4,children:e.jsx(De,{data:f,setData:b})}),e.jsx(a,{item:!0,xs:4,display:"flex",justifyContent:"end",children:e.jsx(he,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(ve,{value:S,onChange:(s,o)=>G(o),centered:!0,children:[e.jsx(M,{label:"All",value:1}),e.jsx(M,{label:"Today Remember Leads",value:2}),e.jsx(M,{label:"Apply filter",value:3})]})})}),e.jsx(a,{item:!0,xs:4,display:"flex",justifyContent:"end",children:e.jsx(xe,{children:e.jsxs(je,{value:m,onChange:le,children:[e.jsx(p,{value:5,children:"5 Per Page"}),e.jsx(p,{value:10,children:"10 Per Page"}),e.jsx(p,{value:15,children:"15 Per Page"}),e.jsx(p,{value:1,children:"All Per Page"})]})})})]}),e.jsx(pe,{component:fe,style:{marginTop:"20px"},children:e.jsxs(_e,{children:[e.jsx(ge,{children:e.jsxs(z,{style:{fontWeight:"bold",backgroundColor:"#FFF9C4"},children:[e.jsx(c,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Employee Name"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Leads Name"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Leads Mobile"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Leads Email"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Leads Company"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(c,{style:{fontWeight:"bold"},children:"State"}),e.jsx(c,{style:{fontWeight:"bold"},children:"City"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Call Discussion"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Reminder Date"}),e.jsx(c,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(be,{children:re.map((s,o)=>e.jsxs(z,{children:[e.jsx(c,{children:o+1}),e.jsx(c,{children:s.emp_name}),e.jsx(c,{children:s.leads_name}),e.jsx(c,{children:s.leads_mobile}),e.jsx(c,{children:s.leads_email}),e.jsx(c,{children:s.leads_company}),e.jsx(c,{children:s.leads_address}),e.jsx(c,{children:s.leads_state}),e.jsx(c,{children:s.leads_city}),e.jsx(c,{children:s.product_name}),e.jsx(c,{children:s.Call_Discussion}),e.jsx(c,{children:Y(s.reminder_date).format("YYYY-MM-DD")}),e.jsxs(c,{children:[e.jsx(j,{onClick:()=>ue(s.follow_id),children:"Convert"}),e.jsx(j,{onClick:()=>oe(s.follow_id),children:"Edit"}),e.jsx(j,{onClick:()=>ce(s.follow_id),children:"Follow Ups"})]})]},o))})]})}),e.jsx(a,{container:!0,spacing:2,display:"flex",justifyContent:"center",className:"mt-4",children:e.jsx(Ce,{spacing:2,children:e.jsx(Le,{count:Math.ceil(l.length/m),page:_,onChange:(s,o)=>r(o),size:"small",style:{cursor:"pointer","&:hover":{backgroundColor:"transparent"}}})})}),e.jsxs(R,{open:I,onClose:()=>P(!1),maxWidth:"md",children:[e.jsx(N,{children:e.jsx(Se,{data:H,onClose:()=>P(!1)})}),e.jsx($,{children:e.jsx(j,{onClick:()=>P(!1),children:"Close"})})]}),e.jsxs(R,{open:K,onClose:()=>F(!1),maxWidth:"md",children:[e.jsx(N,{children:e.jsx(We,{data:X,onClose:()=>F(!1)})}),e.jsx($,{children:e.jsx(j,{onClick:()=>F(!1),children:"Close"})})]}),e.jsxs(R,{open:ee,onClose:()=>k(!1),maxWidth:"md",children:[e.jsx(N,{children:e.jsx(ye,{data:se,onClose:()=>k(!1)})}),e.jsx($,{children:e.jsx(j,{onClick:()=>k(!1),children:"Close"})})]})]})};export{Te as default};
